# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Commands

### Development
```bash
npm run dev         # Start Vite development server (http://localhost:5173)
npm run build       # Build for production (TypeScript compilation + Vite build)
npm run preview     # Preview production build locally
npm run lint        # Run ESLint on entire codebase
```

### Firebase Deployment
```bash
npm run deploy      # Build and deploy to Firebase Hosting
npm run serve       # Serve locally using Firebase hosting emulator
firebase login      # Login to Firebase CLI
firebase init       # Initialize Firebase project
```

## Architecture

This is a React 19 + TypeScript pest control booking system with Firebase backend:

### Tech Stack
- **Frontend**: React 19, TypeScript, Vite
- **Styling**: Tailwind CSS v3 with mobile-first responsive design
- **Backend**: Firebase Firestore (NoSQL database)
- **Hosting**: Firebase Hosting
- **Routing**: React Router v7
- **Authentication**: Client-side password authentication (password: `bugfree2025!`)

### Key Architecture Patterns

**Component Structure**: Pages → Components pattern where:
- `src/pages/` contains route-level components (HomePage, AdminPage, SearchPage)
- `src/components/` contains reusable UI components
- All components are mobile-optimized with `sm:` breakpoints

**State Management**: No global state management library. Uses:
- Local component state with React hooks
- Props drilling for component communication
- localStorage for admin session persistence (8-hour expiration)

**Data Flow**:
1. Customer creates booking → `bookingService.createBooking()` → Firestore
2. Booking gets 8-digit reference number (format: AB123456)
3. Customer can search by booking number → `bookingService.getBookingByNumber()`  
4. Admin manages bookings → `bookingService.updateBooking()` with status workflow

**Authentication Model**: Client-side only - admin password hardcoded in `authService.ts`. Session stored in localStorage with 8-hour expiration. No Firebase Auth integration.

### Critical Business Logic

**Booking Status Workflow**: `received` → `confirmed` → `in_progress` → `completed` (or `cancelled`)

**Booking Number Generation**: 8-character alphanumeric IDs generated by `utils/generateId.ts`

**Type System**: Centralized in `src/types/index.ts` with Korean language labels for all enums (PestType, TimeSlot, BookingStatus)

### Firebase Configuration

**Firestore Rules**: Open read/write for bookings collection (in `firestore.rules`) - suitable for demo but needs proper authentication for production

**Hosting**: SPA configuration with catch-all routing to `/index.html` and aggressive caching for static assets

### Environment Variables Required
```env
VITE_FIREBASE_API_KEY
VITE_FIREBASE_AUTH_DOMAIN  
VITE_FIREBASE_PROJECT_ID
VITE_FIREBASE_STORAGE_BUCKET
VITE_FIREBASE_MESSAGING_SENDER_ID
VITE_FIREBASE_APP_ID
```

## Mobile Optimization Notes

All components use Tailwind's `sm:` prefix for mobile-first responsive design. Touch targets are minimum 44px. Modals become full-screen on mobile.